"use strict";(self.webpackChunksupastash_docs=self.webpackChunksupastash_docs||[]).push([[7890],{1591:(e,l,s)=>{s.r(l),s.d(l,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>i});const t=JSON.parse('{"id":"sync-status-manager","title":"Local Sync & Delete Log Utils","description":"These functions handle internal tracking of the last sync and delete operations for each table in your local SQLite database. Supastash relies on this metadata to decide what to pull, push, or clean up during sync.","source":"@site/docs/sync-status-manager.md","sourceDirName":".","slug":"/sync-status-manager","permalink":"/supastash/docs/sync-status-manager","draft":false,"unlisted":false,"editUrl":"https://github.com/0xZekeA/supastash/tree/main/docs-site/docs/sync-status-manager.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Destructive Operations","permalink":"/supastash/docs/destructives"},"next":{"title":"useSupastash","permalink":"/supastash/docs/useSupastash-hook"}}');var n=s(4848),a=s(8453);const c={},r="Local Sync & Delete Log Utils",o={},i=[{value:"\ud83d\udce4 <code>setLocalSyncLog(tableName: string, lastSyncedAt: string)</code>",id:"-setlocalsynclogtablename-string-lastsyncedat-string",level:3},{value:"\ud83d\udce5 <code>getLocalSyncLog(tableName: string)</code>",id:"-getlocalsynclogtablename-string",level:3},{value:"\ud83e\uddf9 <code>clearLocalSyncLog(tableName: string)</code>",id:"-clearlocalsynclogtablename-string",level:3},{value:"\ud83d\udd04 <code>clearAllLocalSyncLog()</code>",id:"-clearalllocalsynclog",level:3},{value:"\ud83d\uddd1 <code>setLocalDeleteLog(tableName: string, lastDeletedAt: string)</code>",id:"-setlocaldeletelogtablename-string-lastdeletedat-string",level:3},{value:"\ud83d\udd0d <code>getLocalDeleteLog(tableName: string)</code>",id:"-getlocaldeletelogtablename-string",level:3},{value:"\ud83e\uddfc <code>clearLocalDeleteLog(tableName: string)</code>",id:"-clearlocaldeletelogtablename-string",level:3},{value:"\u274c <code>clearAllLocalDeleteLog()</code>",id:"-clearalllocaldeletelog",level:3},{value:"\ud83d\udd17 What\u2019s Next?",id:"-whats-next",level:3}];function d(e){const l={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.header,{children:(0,n.jsx)(l.h1,{id:"local-sync--delete-log-utils",children:"Local Sync & Delete Log Utils"})}),"\n",(0,n.jsxs)(l.p,{children:["These functions handle internal tracking of the ",(0,n.jsx)(l.strong,{children:"last sync"})," and ",(0,n.jsx)(l.strong,{children:"delete operations"})," for each table in your local SQLite database. Supastash relies on this metadata to decide what to pull, push, or clean up during sync."]}),"\n",(0,n.jsxs)(l.blockquote,{children:["\n",(0,n.jsxs)(l.p,{children:["\u26a0\ufe0f ",(0,n.jsx)(l.strong,{children:"For development and debugging only \u2014 avoid using them in production."})]}),"\n"]}),"\n",(0,n.jsx)(l.hr,{}),"\n",(0,n.jsxs)(l.h3,{id:"-setlocalsynclogtablename-string-lastsyncedat-string",children:["\ud83d\udce4 ",(0,n.jsx)(l.code,{children:"setLocalSyncLog(tableName: string, lastSyncedAt: string)"})]}),"\n",(0,n.jsx)(l.p,{children:"Sets the sync timestamp for a given table."}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-ts",children:'await setLocalSyncLog("users", new Date().toISOString());\n'})}),"\n",(0,n.jsx)(l.hr,{}),"\n",(0,n.jsxs)(l.h3,{id:"-getlocalsynclogtablename-string",children:["\ud83d\udce5 ",(0,n.jsx)(l.code,{children:"getLocalSyncLog(tableName: string)"})]}),"\n",(0,n.jsx)(l.p,{children:"Retrieves the sync log for a given table."}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-ts",children:'const syncLog = await getLocalSyncLog("users");\n/*\n{\n  table_name: "users",\n  lastSyncedAt: "2024-06-01T10:00:00.000Z"\n}\n*/\n'})}),"\n",(0,n.jsxs)(l.p,{children:["Returns ",(0,n.jsx)(l.code,{children:"null"})," if the table has no recorded sync log."]}),"\n",(0,n.jsx)(l.hr,{}),"\n",(0,n.jsxs)(l.h3,{id:"-clearlocalsynclogtablename-string",children:["\ud83e\uddf9 ",(0,n.jsx)(l.code,{children:"clearLocalSyncLog(tableName: string)"})]}),"\n",(0,n.jsx)(l.p,{children:"Deletes the sync log for a specific table."}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-ts",children:'await clearLocalSyncLog("users");\n'})}),"\n",(0,n.jsx)(l.hr,{}),"\n",(0,n.jsxs)(l.h3,{id:"-clearalllocalsynclog",children:["\ud83d\udd04 ",(0,n.jsx)(l.code,{children:"clearAllLocalSyncLog()"})]}),"\n",(0,n.jsx)(l.p,{children:"Clears all sync logs table."}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-ts",children:"await clearAllLocalSyncLog();\n"})}),"\n",(0,n.jsxs)(l.blockquote,{children:["\n",(0,n.jsxs)(l.p,{children:["\u26a0\ufe0f ",(0,n.jsx)(l.strong,{children:"Warning:"})," This clears sync history for all tables. Use with caution (e.g., in dev resets)."]}),"\n"]}),"\n",(0,n.jsx)(l.hr,{}),"\n",(0,n.jsxs)(l.h3,{id:"-setlocaldeletelogtablename-string-lastdeletedat-string",children:["\ud83d\uddd1 ",(0,n.jsx)(l.code,{children:"setLocalDeleteLog(tableName: string, lastDeletedAt: string)"})]}),"\n",(0,n.jsx)(l.p,{children:"Sets the lastest deleted timestamp for a given table."}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-ts",children:'await setLocalDeleteLog("users", new Date().toISOString());\n'})}),"\n",(0,n.jsx)(l.hr,{}),"\n",(0,n.jsxs)(l.h3,{id:"-getlocaldeletelogtablename-string",children:["\ud83d\udd0d ",(0,n.jsx)(l.code,{children:"getLocalDeleteLog(tableName: string)"})]}),"\n",(0,n.jsx)(l.p,{children:"Retrieves the delete log for a given table."}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-ts",children:'const deleteLog = await getLocalDeleteLog("users");\n/*\n{\n  table_name: "users",\n  lastDeletedAt: "2024-06-01T10:00:00.000Z"\n}\n*/\n'})}),"\n",(0,n.jsxs)(l.p,{children:["Returns ",(0,n.jsx)(l.code,{children:"null"})," if the table has no delete checkpoint."]}),"\n",(0,n.jsx)(l.hr,{}),"\n",(0,n.jsxs)(l.h3,{id:"-clearlocaldeletelogtablename-string",children:["\ud83e\uddfc ",(0,n.jsx)(l.code,{children:"clearLocalDeleteLog(tableName: string)"})]}),"\n",(0,n.jsx)(l.p,{children:"Deletes the delete log for a specific table."}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-ts",children:'await clearLocalDeleteLog("users");\n'})}),"\n",(0,n.jsx)(l.hr,{}),"\n",(0,n.jsxs)(l.h3,{id:"-clearalllocaldeletelog",children:["\u274c ",(0,n.jsx)(l.code,{children:"clearAllLocalDeleteLog()"})]}),"\n",(0,n.jsx)(l.p,{children:"Drops the entire delete log table."}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-ts",children:"await clearAllLocalDeleteLog();\n"})}),"\n",(0,n.jsxs)(l.blockquote,{children:["\n",(0,n.jsxs)(l.p,{children:["\u26a0\ufe0f ",(0,n.jsx)(l.strong,{children:"Warning:"})," This wipes all delete history for all tables."]}),"\n"]}),"\n",(0,n.jsx)(l.h3,{id:"-whats-next",children:"\ud83d\udd17 What\u2019s Next?"}),"\n",(0,n.jsxs)(l.ul,{children:["\n",(0,n.jsx)(l.li,{children:(0,n.jsx)(l.a,{href:"/supastash/docs/data-access",children:"Data Access docs"})}),"\n",(0,n.jsx)(l.li,{children:(0,n.jsx)(l.a,{href:"/supastash/docs/useSupastash-hook",children:"useSupastash docs"})}),"\n",(0,n.jsx)(l.li,{children:(0,n.jsx)(l.a,{href:"/supastash/docs/supastash-query-builder",children:"Query Builder docs"})}),"\n"]})]})}function h(e={}){const{wrapper:l}={...(0,a.R)(),...e.components};return l?(0,n.jsx)(l,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},8453:(e,l,s)=>{s.d(l,{R:()=>c,x:()=>r});var t=s(6540);const n={},a=t.createContext(n);function c(e){const l=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(l):{...l,...e}}),[l,e])}function r(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),t.createElement(a.Provider,{value:l},e.children)}}}]);