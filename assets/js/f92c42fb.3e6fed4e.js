"use strict";(self.webpackChunksupastash_docs=self.webpackChunksupastash_docs||[]).push([[7175],{7457:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"select-query","title":".select() method","description":"The .select() method in Supastash fetches rows from your local SQLite table. It works like Supabase \u2014 with filters, limits, and column selection \u2014 but all with offline-first handling under the hood.","source":"@site/docs/select-query.md","sourceDirName":".","slug":"/select-query","permalink":"/supastash/docs/select-query","draft":false,"unlisted":false,"editUrl":"https://github.com/0xZekeA/supastash/tree/main/docs-site/docs/select-query.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":".insert() method","permalink":"/supastash/docs/insert-query"},"next":{"title":".update() method","permalink":"/supastash/docs/update-query"}}');var l=n(4848),r=n(8453);const i={},d=".select() method",c={},o=[{value:"\ud83e\udde0 How It Works",id:"-how-it-works",level:2},{value:"\ud83e\uddfe Selecting Data",id:"-selecting-data",level:2},{value:"1. <strong>Multiple Rows (Default)</strong>",id:"1-multiple-rows-default",level:3},{value:"2. <strong>Single Row with <code>.single()</code></strong>",id:"2-single-row-with-single",level:3},{value:"3. <strong>With <code>Type</code> Support</strong>",id:"3-with-type-support",level:3},{value:"\ud83d\udd0e Filters and Columns",id:"-filters-and-columns",level:2},{value:"\ud83e\uddea Return Shape",id:"-return-shape",level:2},{value:"\u26a0\ufe0f Errors",id:"\ufe0f-errors",level:2},{value:"\u2705 When to Use <code>.select()</code>",id:"-when-to-use-select",level:2}];function a(e){const s={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.header,{children:(0,l.jsxs)(s.h1,{id:"select-method",children:[(0,l.jsx)(s.code,{children:".select()"})," method"]})}),"\n",(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:".select()"})," method in Supastash fetches rows from your local SQLite table. It works like Supabase \u2014 with filters, limits, and column selection \u2014 but all with offline-first handling under the hood."]}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsxs)(s.p,{children:["\ud83d\udd0d By default, ",(0,l.jsx)(s.code,{children:".select()"})," ",(0,l.jsx)(s.strong,{children:"only reads from the local database"})," unless ",(0,l.jsx)(s.code,{children:'syncMode("remoteOnly")'})," or ",(0,l.jsx)(s.code,{children:"viewRemoteResult: true"})," is used."]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h2,{id:"-how-it-works",children:"\ud83e\udde0 How It Works"}),"\n",(0,l.jsxs)(s.p,{children:["Calling ",(0,l.jsx)(s.code,{children:".select()"})," performs the following steps:"]}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsx)(s.li,{children:"Validates the target table."}),"\n",(0,l.jsxs)(s.li,{children:["Constructs a ",(0,l.jsx)(s.code,{children:"SELECT"})," SQL statement using provided columns and filters."]}),"\n",(0,l.jsx)(s.li,{children:"Applies a limit if specified."}),"\n",(0,l.jsx)(s.li,{children:"Runs the query against the local SQLite DB."}),"\n",(0,l.jsx)(s.li,{children:"Parses any JSON-like fields for proper deserialization."}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:["The method supports returning either a single result or a list, depending on whether ",(0,l.jsx)(s.code,{children:".single()"})," was chained."]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h2,{id:"-selecting-data",children:"\ud83e\uddfe Selecting Data"}),"\n",(0,l.jsxs)(s.h3,{id:"1-multiple-rows-default",children:["1. ",(0,l.jsx)(s.strong,{children:"Multiple Rows (Default)"})]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:'const result = await supastash\n  .from("orders")\n  .select("id, amount")\n  .eq("status", "pending")\n  .run();\n\n// result.data: [{ id: "a1", amount: 500 }, ...]\n'})}),"\n",(0,l.jsxs)(s.h3,{id:"2-single-row-with-single",children:["2. ",(0,l.jsxs)(s.strong,{children:["Single Row with ",(0,l.jsx)(s.code,{children:".single()"})]})]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:'const result = await supastash\n  .from("users")\n  .select<T>("id, email")\n  .eq("id", "user_123")\n  .single()\n  .run();\n\n// result.data: { id: "user_123", email: "test@mail.com" }\n'})}),"\n",(0,l.jsxs)(s.p,{children:["If ",(0,l.jsx)(s.code,{children:".single()"})," is used and no record is found, ",(0,l.jsx)(s.code,{children:"data"})," will be ",(0,l.jsx)(s.code,{children:"null"}),"."]}),"\n",(0,l.jsxs)(s.h3,{id:"3-with-type-support",children:["3. ",(0,l.jsxs)(s.strong,{children:["With ",(0,l.jsx)(s.code,{children:"Type"})," Support"]})]}),"\n",(0,l.jsx)(s.p,{children:"You can use TypeScript types with any CRUD method for better safety and autocomplete."}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:'interface User {\n  id: string;\n  email: string;\n}\n\nconst result = await supastash\n  .from("users")\n  .select<User>("id, email")\n  .eq("id", "user_123")\n  .single()\n  .run();\n\n// result.data: { id: "user_123", email: "test@mail.com" }\n'})}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h2,{id:"-filters-and-columns",children:"\ud83d\udd0e Filters and Columns"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["You can select specific columns or use ",(0,l.jsx)(s.code,{children:"*"})," to select all"]}),"\n",(0,l.jsxs)(s.li,{children:["Filters support all standard operators: ",(0,l.jsx)(s.code,{children:".eq()"}),", ",(0,l.jsx)(s.code,{children:".gt()"}),", ",(0,l.jsx)(s.code,{children:".in()"}),", etc."]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"Example:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:'await supastash\n  .from("tasks")\n  .select<T>("id, title")\n  .eq("assigned_to", "user_1")\n  .limit(10)\n  .run();\n'})}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h2,{id:"-return-shape",children:"\ud83e\uddea Return Shape"}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"Case"}),(0,l.jsx)(s.th,{children:"Returned Data"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:".single()"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"{ data: object | null, error, success }"})})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"Default"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"{ data: array, error, success }"})})]})]})]}),"\n",(0,l.jsxs)(s.p,{children:["You always get a ",(0,l.jsx)(s.code,{children:"data"})," field with the result:"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["It\u2019s ",(0,l.jsx)(s.code,{children:"null"})," on failure"]}),"\n",(0,l.jsxs)(s.li,{children:["It\u2019s a single object if ",(0,l.jsx)(s.code,{children:".single()"})," is used"]}),"\n",(0,l.jsx)(s.li,{children:"It\u2019s an array of objects otherwise"}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h2,{id:"\ufe0f-errors",children:"\u26a0\ufe0f Errors"}),"\n",(0,l.jsx)(s.p,{children:"If the table does not exist or the query fails, you\u2019ll get:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:'{\n  data: null,\n  error: { message: "..." },\n  success: false\n}\n'})}),"\n",(0,l.jsx)(s.p,{children:"Errors are logged to the console for easier debugging."}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsxs)(s.h2,{id:"-when-to-use-select",children:["\u2705 When to Use ",(0,l.jsx)(s.code,{children:".select()"})]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Reading from the local DB"}),"\n",(0,l.jsx)(s.li,{children:"Displaying cached data"}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:["If you want fresh data from Supabase, you can call with Supabase's client, use ",(0,l.jsx)(s.code,{children:'.syncMode("remoteOnly")'})," or pass ",(0,l.jsx)(s.code,{children:"{ viewRemoteResult: true }"})," to ",(0,l.jsx)(s.code,{children:".run()"}),"."]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsxs)(s.p,{children:["Next: ",(0,l.jsx)(s.a,{href:"/supastash/docs/update-query",children:(0,l.jsx)(s.code,{children:".update()"})})]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>d});var t=n(6540);const l={},r=t.createContext(l);function i(e){const s=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),t.createElement(r.Provider,{value:s},e.children)}}}]);