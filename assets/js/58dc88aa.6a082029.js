"use strict";(self.webpackChunksupastash_docs=self.webpackChunksupastash_docs||[]).push([[9613],{5020:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>c,metadata:()=>l,toc:()=>a});const l=JSON.parse('{"id":"supastash-filters","title":"Supastash Filters","description":"Supastash\'s filter builder lets you narrow down query results using a fluent, chainable API modeled after Supabase\'s client. Filters are appended after calling .select(), .update(), .delete(), or any other CRUD method on a table.","source":"@site/docs/supastash-filters.md","sourceDirName":".","slug":"/supastash-filters","permalink":"/supastash/docs/supastash-filters","draft":false,"unlisted":false,"editUrl":"https://github.com/0xZekeA/supastash/tree/main/docs-site/docs/supastash-filters.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Run executions","permalink":"/supastash/docs/run-executions"},"next":{"title":"Fetch Policies","permalink":"/supastash/docs/fetchPolicy"}}');var r=n(4848),i=n(8453);const c={},t="Supastash Filters",d={},a=[{value:"How Filters Work",id:"how-filters-work",level:2},{value:"Filter Methods",id:"filter-methods",level:2},{value:"<code>.eq(column, value)</code>",id:"eqcolumn-value",level:3},{value:"<code>.neq(column, value)</code>",id:"neqcolumn-value",level:3},{value:"<code>.gt(column, value)</code>",id:"gtcolumn-value",level:3},{value:"<code>.lt(column, value)</code>",id:"ltcolumn-value",level:3},{value:"<code>.gte(column, value)</code>",id:"gtecolumn-value",level:3},{value:"<code>.lte(column, value)</code>",id:"ltecolumn-value",level:3},{value:"<code>.like(column, value)</code>",id:"likecolumn-value",level:3},{value:"<code>.is(column, value)</code>",id:"iscolumn-value",level:3},{value:"<code>.in(column, values[])</code>",id:"incolumn-values",level:3},{value:"Additional Query Modifiers",id:"additional-query-modifiers",level:2},{value:"<code>.limit(n)</code>",id:"limitn",level:3},{value:"<code>.single()</code>",id:"single",level:3},{value:"<code>.cacheFirst()</code>",id:"cachefirst",level:3},{value:"<code>.syncMode(mode)</code>",id:"syncmodemode",level:3},{value:"Executing the Query",id:"executing-the-query",level:2},{value:"With remote result visibility",id:"with-remote-result-visibility",level:3},{value:"With retry logic",id:"with-retry-logic",level:3},{value:"Full Example",id:"full-example",level:2}];function o(e){const s={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"supastash-filters",children:"Supastash Filters"})}),"\n",(0,r.jsxs)(s.p,{children:["Supastash's filter builder lets you narrow down query results using a fluent, chainable API modeled after Supabase's client. Filters are appended after calling ",(0,r.jsx)(s.code,{children:".select()"}),", ",(0,r.jsx)(s.code,{children:".update()"}),", ",(0,r.jsx)(s.code,{children:".delete()"}),", or any other CRUD method on a table."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"how-filters-work",children:"How Filters Work"}),"\n",(0,r.jsxs)(s.p,{children:["Filters are collected into the query and applied as SQL ",(0,r.jsx)(s.code,{children:"WHERE"})," clauses when the query executes against the local SQLite database (or Supabase, depending on your sync mode). You can chain as many filters as needed, they are combined with ",(0,r.jsx)(s.code,{children:"AND"})," logic."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:'await supastash\n  .from("users")\n  .select()\n  .eq("status", "active")\n  .gte("age", 18)\n  .run();\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"filter-methods",children:"Filter Methods"}),"\n",(0,r.jsx)(s.h3,{id:"eqcolumn-value",children:(0,r.jsx)(s.code,{children:".eq(column, value)"})}),"\n",(0,r.jsxs)(s.p,{children:["Filters rows where ",(0,r.jsx)(s.code,{children:"column = value"}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:'.eq("role", "admin")\n// WHERE role = \'admin\'\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"neqcolumn-value",children:(0,r.jsx)(s.code,{children:".neq(column, value)"})}),"\n",(0,r.jsxs)(s.p,{children:["Filters rows where ",(0,r.jsx)(s.code,{children:"column != value"}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:'.neq("status", "deleted")\n// WHERE status != \'deleted\'\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"gtcolumn-value",children:(0,r.jsx)(s.code,{children:".gt(column, value)"})}),"\n",(0,r.jsxs)(s.p,{children:["Filters rows where ",(0,r.jsx)(s.code,{children:"column > value"}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:'.gt("score", 100)\n// WHERE score > 100\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"ltcolumn-value",children:(0,r.jsx)(s.code,{children:".lt(column, value)"})}),"\n",(0,r.jsxs)(s.p,{children:["Filters rows where ",(0,r.jsx)(s.code,{children:"column < value"}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:'.lt("price", 50)\n// WHERE price < 50\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"gtecolumn-value",children:(0,r.jsx)(s.code,{children:".gte(column, value)"})}),"\n",(0,r.jsxs)(s.p,{children:["Filters rows where ",(0,r.jsx)(s.code,{children:"column >= value"}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:'.gte("created_at", "2024-01-01")\n// WHERE created_at >= \'2024-01-01\'\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"ltecolumn-value",children:(0,r.jsx)(s.code,{children:".lte(column, value)"})}),"\n",(0,r.jsxs)(s.p,{children:["Filters rows where ",(0,r.jsx)(s.code,{children:"column <= value"}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:'.lte("quantity", 100)\n// WHERE quantity <= 100\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"likecolumn-value",children:(0,r.jsx)(s.code,{children:".like(column, value)"})}),"\n",(0,r.jsxs)(s.p,{children:["Filters rows using SQL ",(0,r.jsx)(s.code,{children:"LIKE"})," pattern matching. Use ",(0,r.jsx)(s.code,{children:"%"})," as a wildcard."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:'.like("name", "%john%")\n// WHERE name LIKE \'%john%\'\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"iscolumn-value",children:(0,r.jsx)(s.code,{children:".is(column, value)"})}),"\n",(0,r.jsxs)(s.p,{children:["Filters rows using SQL ",(0,r.jsx)(s.code,{children:"IS"})," logic. Useful for ",(0,r.jsx)(s.code,{children:"NULL"})," checks or boolean comparisons."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:'.is("deleted_at", null)\n// WHERE deleted_at IS NULL\n\n.is("verified", true)\n// WHERE verified IS TRUE\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"incolumn-values",children:(0,r.jsx)(s.code,{children:".in(column, values[])"})}),"\n",(0,r.jsxs)(s.p,{children:["Filters rows where ",(0,r.jsx)(s.code,{children:"column"})," matches any value in the provided array."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:'.in("status", ["active", "pending", "invited"])\n// WHERE status IN (\'active\', \'pending\', \'invited\')\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"additional-query-modifiers",children:"Additional Query Modifiers"}),"\n",(0,r.jsx)(s.p,{children:"These methods aren't filters per se, but they are commonly chained alongside filters to control query behavior."}),"\n",(0,r.jsx)(s.h3,{id:"limitn",children:(0,r.jsx)(s.code,{children:".limit(n)"})}),"\n",(0,r.jsx)(s.p,{children:"Restricts the number of rows returned."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:".limit(10)\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"single",children:(0,r.jsx)(s.code,{children:".single()"})}),"\n",(0,r.jsxs)(s.p,{children:["Returns a single object instead of an array. Automatically sets ",(0,r.jsx)(s.code,{children:"limit(1)"}),". Throws if more than one result is found."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:'await supastash.from("users").select().eq("id", userId).single().run();\n// Returns: { data: { id, name, ... }, error, success }\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"cachefirst",children:(0,r.jsx)(s.code,{children:".cacheFirst()"})}),"\n",(0,r.jsxs)(s.p,{children:["Available on ",(0,r.jsx)(s.code,{children:".select()"})," only. Resolves the query from local SQLite first, falling back to Supabase if no usable result is found."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:'await supastash\n  .from("products")\n  .select()\n  .eq("id", productId)\n  .cacheFirst()\n  .run();\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"syncmodemode",children:(0,r.jsx)(s.code,{children:".syncMode(mode)"})}),"\n",(0,r.jsx)(s.p,{children:"Overrides the default sync strategy for this specific query."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Mode"}),(0,r.jsx)(s.th,{children:"Behavior"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"localOnly"})}),(0,r.jsx)(s.td,{children:"Only reads/writes to local SQLite"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"remoteOnly"})}),(0,r.jsx)(s.td,{children:"Only targets Supabase"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"localFirst"})}),(0,r.jsxs)(s.td,{children:["Uses local first, syncs to remote in background ",(0,r.jsx)(s.em,{children:"(default)"})]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"remoteFirst"})}),(0,r.jsx)(s.td,{children:"Writes to Supabase first, then mirrors to local on success"})]})]})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:'.syncMode("remoteOnly")\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"executing-the-query",children:"Executing the Query"}),"\n",(0,r.jsxs)(s.p,{children:["Once your filters are set, call ",(0,r.jsx)(s.code,{children:".run()"}),", ",(0,r.jsx)(s.code,{children:".execute()"}),", or ",(0,r.jsx)(s.code,{children:".go()"})," \u2014 all three are equivalent."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:'const { data, error, success } = await supastash\n  .from("orders")\n  .select()\n  .eq("user_id", currentUser.id)\n  .lte("total", 500)\n  .limit(20)\n  .run();\n'})}),"\n",(0,r.jsx)(s.h3,{id:"with-remote-result-visibility",children:"With remote result visibility"}),"\n",(0,r.jsxs)(s.p,{children:["Pass ",(0,r.jsx)(s.code,{children:"{ viewRemoteResult: true }"})," to see both local and remote responses:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:'const result = await supastash\n  .from("orders")\n  .select()\n  .eq("status", "pending")\n  .run({ viewRemoteResult: true });\n\n// result.local \u2014 local SQLite response\n// result.remote \u2014 Supabase response\n// result.success \u2014 boolean\n'})}),"\n",(0,r.jsx)(s.h3,{id:"with-retry-logic",children:"With retry logic"}),"\n",(0,r.jsx)(s.p,{children:"For remote operations, you can configure retries with exponential backoff:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:".run({\n  viewRemoteResult: true,\n  remoteRetry: 3,         // up to 3 retries\n  remoteRetryDelay: 500   // starting delay in ms (doubles each retry)\n})\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"full-example",children:"Full Example"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:'const { data, error } = await supastash\n  .from("products")\n  .select()\n  .eq("category", "electronics")\n  .gte("price", 100)\n  .lte("price", 999)\n  .in("brand", ["Sony", "Samsung", "Apple"])\n  .is("in_stock", true)\n  .limit(25)\n  .run();\n'})}),"\n",(0,r.jsx)(s.p,{children:"This translates roughly to:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"SELECT * FROM products\nWHERE category = 'electronics'\n  AND price >= 100\n  AND price <= 999\n  AND brand IN ('Sony', 'Samsung', 'Apple')\n  AND in_stock IS TRUE\nLIMIT 25;\n"})})]})}function u(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>t});var l=n(6540);const r={},i=l.createContext(r);function c(e){const s=l.useContext(i);return l.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),l.createElement(i.Provider,{value:s},e.children)}}}]);