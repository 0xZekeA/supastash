"use strict";(self.webpackChunksupastash_docs=self.webpackChunksupastash_docs||[]).push([[4684],{8453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>i});var r=n(6540);const l={},d=r.createContext(l);function t(e){const s=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),r.createElement(d.Provider,{value:s},e.children)}},9807:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>i,default:()=>o,frontMatter:()=>t,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"data-access","title":"\ud83d\udce6 Data Access & Sync","description":"useSupastashData","source":"@site/docs/data-access.md","sourceDirName":".","slug":"/data-access","permalink":"/supastash/docs/data-access","draft":false,"unlisted":false,"editUrl":"https://github.com/0xZekeA/supastash/tree/main/docs-site/docs/data-access.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"useSupastash","permalink":"/supastash/docs/useSupastash-hook"},"next":{"title":"Configuration","permalink":"/supastash/docs/configuration"}}');var l=n(4848),d=n(8453);const t={},i="\ud83d\udce6 Data Access & Sync",a={},c=[{value:"<code>useSupastashData</code>",id:"usesupastashdata",level:2},{value:"\u2705 Key Features",id:"-key-features",level:3},{value:"\ud83e\udde0 Usage",id:"-usage",level:3},{value:"\ud83d\udd01 <code>onInsertAndUpdate</code>",id:"-oninsertandupdate",level:3},{value:"\ud83d\ude80 <code>onPushToRemote</code>",id:"-onpushtoremote",level:3},{value:"\ud83d\udd0c Parameters",id:"-parameters",level:3},{value:"\ud83d\udce4 Returns",id:"-returns",level:3},{value:"\u2699\ufe0f Under the Hood",id:"\ufe0f-under-the-hood",level:3},{value:"\ud83d\udd10 Notes",id:"-notes",level:3},{value:"\ud83e\uddea Tips",id:"-tips",level:3},{value:"\ud83d\udd04 Table Refresh Utilities",id:"-table-refresh-utilities",level:2},{value:"\ud83d\udce6 Exports",id:"-exports",level:3},{value:"\ud83e\udde0 Under the Hood",id:"-under-the-hood",level:3},{value:"\ud83e\udde9 <code>refreshTable(table: string): void</code>",id:"-refreshtabletable-string-void",level:3},{value:"Example:",id:"example",level:4},{value:"\ud83e\udde9 <code>refreshAllTables(): void</code>",id:"-refreshalltables-void",level:3},{value:"Example:",id:"example-1",level:4},{value:"\ud83d\udee0 Usage in a Component (Example)",id:"-usage-in-a-component-example",level:3},{value:"\ud83e\udde9 <code>refreshTableWithPayload(table, payload, operation)</code>",id:"-refreshtablewithpayloadtable-payload-operation",level:3},{value:"Parameters:",id:"parameters",level:4},{value:"\ud83d\udd27 Example:",id:"-example",level:4},{value:"\ud83d\udd17 What\u2019s Next?",id:"-whats-next",level:3}];function h(e){const s={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.header,{children:(0,l.jsx)(s.h1,{id:"-data-access--sync",children:"\ud83d\udce6 Data Access & Sync"})}),"\n",(0,l.jsx)(s.h2,{id:"usesupastashdata",children:(0,l.jsx)(s.code,{children:"useSupastashData"})}),"\n",(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:"useSupastashData"})," hook lets you work with synced data in a clear and reliable way. It reads from your local SQLite database, keeps that data in sync with Supabase in the background, and listens for any changes from Supabase in real time."]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"-key-features",children:"\u2705 Key Features"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["\ud83d\udd04 ",(0,l.jsx)(s.strong,{children:"Initial Local Fetch"})," \u2013 Loads data from SQLite immediately on mount."]}),"\n",(0,l.jsxs)(s.li,{children:["\ud83c\udf10 ",(0,l.jsx)(s.strong,{children:"Realtime Subscriptions"})," \u2013 Responds to Supabase ",(0,l.jsx)(s.code,{children:"INSERT"}),", ",(0,l.jsx)(s.code,{children:"UPDATE"}),", and ",(0,l.jsx)(s.code,{children:"DELETE"})," events."]}),"\n",(0,l.jsxs)(s.li,{children:["\ud83d\udce6 ",(0,l.jsx)(s.strong,{children:"Batched UI Updates"})," \u2013 Debounced with ",(0,l.jsx)(s.code,{children:"flushIntervalMs"})," to reduce re-renders."]}),"\n",(0,l.jsxs)(s.li,{children:["\ud83e\udde0 ",(0,l.jsx)(s.strong,{children:"Memoized Output"})," \u2013 Internally optimized using version tracking."]}),"\n",(0,l.jsxs)(s.li,{children:["\ud83e\uddea ",(0,l.jsx)(s.strong,{children:"Lazy Mode"})," \u2013 Gives you manual control to trigger fetch/subscription when needed."]}),"\n",(0,l.jsxs)(s.li,{children:["\ud83d\udd27 ",(0,l.jsx)(s.strong,{children:"Custom Callbacks"})," \u2013 Hook into inserts, updates, deletes, and push events."]}),"\n",(0,l.jsxs)(s.li,{children:["\ud83e\uddf9 ",(0,l.jsx)(s.strong,{children:"Filter-Aware Syncing"})," \u2013 Syncs only matching rows when filters are applied."]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"-usage",children:"\ud83e\udde0 Usage"}),"\n",(0,l.jsx)(s.p,{children:"Simplified"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-tsx",children:'const { data, dataMap } = useSupastashData("orders");\n'})}),"\n",(0,l.jsx)(s.p,{children:"Filtered"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-tsx",children:'const { data, dataMap, trigger, cancel } = useSupastashData("orders", {\n  filter: {\n    column: "user_id",\n    operator: "eq",\n    value: userId,\n  },\n  shouldFetch: !!userId,\n  flushIntervalMs: 200,\n  lazy: true,\n  realtime: true,\n  onInsert: (item) => console.log("Inserted:", item),\n  onUpdate: (item) => console.log("Updated:", item),\n  onDelete: (item) => console.log("Deleted:", item),\n});\n\nuseEffect(() => {\n  trigger(); // required if lazy mode is enabled\n}, []);\n'})}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsxs)(s.p,{children:["Supastash provides two key hooks for customizing how your data is handled during sync \u2014 both ",(0,l.jsx)(s.strong,{children:"when receiving updates from Supabase"})," and ",(0,l.jsx)(s.strong,{children:"when pushing local changes"})," to the server."]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsxs)(s.h3,{id:"-oninsertandupdate",children:["\ud83d\udd01 ",(0,l.jsx)(s.code,{children:"onInsertAndUpdate"})]}),"\n",(0,l.jsxs)(s.p,{children:["This is triggered when a record is inserted or updated from Supabase via Realtime. Use it to ",(0,l.jsx)(s.strong,{children:"apply custom logic on incoming data"}),', like marking messages as "received" only if they haven\u2019t been processed yet.']}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:'onInsertAndUpdate: async (payload) => {\n  const { data: localMessage } = await supastash\n    .from("messages")\n    .select("*")\n    .eq("id", payload.id)\n    .run();\n\n  if (!localMessage || localMessage.is_received) return;\n\n  await supastash\n    .from("messages")\n    .upsert({ ...localMessage, is_received: true })\n    .run();\n};\n'})}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsxs)(s.h3,{id:"-onpushtoremote",children:["\ud83d\ude80 ",(0,l.jsx)(s.code,{children:"onPushToRemote"})]}),"\n",(0,l.jsxs)(s.p,{children:["This is called when Supastash tries to ",(0,l.jsx)(s.strong,{children:"push unsynced local records"})," to Supabase. You handle the push manually and must return ",(0,l.jsx)(s.code,{children:"true"})," if successful \u2014 otherwise, Supastash will retry later."]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:'onPushToRemote: async (payload) => {\n  const result = await supabase.from("messages").upsert(payload);\n  return !result.error;\n};\n'})}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.p,{children:"These callbacks give you fine-grained control over sync behavior \u2014 perfect for advanced workflows, conditional updates, or integrating custom APIs."}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"-parameters",children:"\ud83d\udd0c Parameters"}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"Name"}),(0,l.jsx)(s.th,{children:"Type"}),(0,l.jsx)(s.th,{children:"Default"}),(0,l.jsx)(s.th,{children:"Description"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"table"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"string"})}),(0,l.jsx)(s.td,{children:"\u2014"}),(0,l.jsx)(s.td,{children:"Name of the table (should match both local and remote)"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"options.shouldFetch"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"boolean"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"true"})}),(0,l.jsx)(s.td,{children:"Whether to fetch local data on mount"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"options.filter"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"RealtimeFilter"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"undefined"})}),(0,l.jsx)(s.td,{children:"Filter to apply both to initial sync and to realtime events"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"options.lazy"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"boolean"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"false"})}),(0,l.jsxs)(s.td,{children:["Delay the fetch and subscription until ",(0,l.jsx)(s.code,{children:"trigger()"})," is called"]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"options.flushIntervalMs"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"number"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"100"})}),(0,l.jsx)(s.td,{children:"Flush interval for batched updates to UI"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"options.realtime"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"boolean"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"true"})}),(0,l.jsx)(s.td,{children:"Enable Supabase realtime subscriptions"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"options.limit"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"number"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"200"})}),(0,l.jsx)(s.td,{children:"Max records to fetch locally"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"options.useFilterWhileSyncing"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"boolean"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"true"})}),(0,l.jsx)(s.td,{children:"Whether to apply filter while syncing from remote"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"options.onInsert"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"(item: any) => void"})}),(0,l.jsx)(s.td,{children:"\u2014"}),(0,l.jsx)(s.td,{children:"Called when a new record is inserted via realtime"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"options.onUpdate"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"(item: any) => void"})}),(0,l.jsx)(s.td,{children:"\u2014"}),(0,l.jsx)(s.td,{children:"Called when a record is updated via realtime"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"options.onDelete"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"(item: any) => void"})}),(0,l.jsx)(s.td,{children:"\u2014"}),(0,l.jsx)(s.td,{children:"Called when a record is deleted via realtime"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"options.onInsertAndUpdate"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"(item: any) => void"})}),(0,l.jsx)(s.td,{children:"\u2014"}),(0,l.jsx)(s.td,{children:"Shortcut callback for both insert and update"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"options.onPushToRemote"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"(items: any[]) => Promise<boolean>"})}),(0,l.jsx)(s.td,{children:"\u2014"}),(0,l.jsx)(s.td,{children:"Optional callback triggered after pushing local changes to remote"})]})]})]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"-returns",children:"\ud83d\udce4 Returns"}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"Name"}),(0,l.jsx)(s.th,{children:"Type"}),(0,l.jsx)(s.th,{children:"Description"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"data"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"R[]"})}),(0,l.jsx)(s.td,{children:"Array of records (memoized on internal version change)"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"dataMap"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"Map<string, R>"})}),(0,l.jsxs)(s.td,{children:["Map keyed by record ",(0,l.jsx)(s.code,{children:"id"})]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"trigger"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"() => void"})}),(0,l.jsxs)(s.td,{children:["Starts fetch and subscription (used when ",(0,l.jsx)(s.code,{children:"lazy: true"}),")"]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"cancel"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"() => void"})}),(0,l.jsx)(s.td,{children:"Cancels an in-flight fetch, prevents further action"})]})]})]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"\ufe0f-under-the-hood",children:"\u2699\ufe0f Under the Hood"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Initial Load"}),":"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Pulls records from local SQLite (optionally filtered)."}),"\n",(0,l.jsx)(s.li,{children:"Ensures the table schema exists. If not, creates one."}),"\n",(0,l.jsx)(s.li,{children:"Triggers a remote pull or pushes unsynced data based on which side has the most recent changes."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Realtime Sync"}),":"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Subscribes to ",(0,l.jsx)(s.code,{children:"postgres_changes"})," with optional filters."]}),"\n",(0,l.jsx)(s.li,{children:"Buffers events and flushes them to UI."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Event Queue Processing"}),":"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Maintains separate queues for inserts, updates, and deletes."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Manual Refresh"}),":"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Can listen to custom events (",(0,l.jsx)(s.code,{children:"refresh:table"}),", ",(0,l.jsx)(s.code,{children:"push:table"}),")."]}),"\n",(0,l.jsxs)(s.li,{children:["This is used internally but be can accessed with ",(0,l.jsx)(s.a,{href:"./data-access#-refreshtablewithpayloadtable-payload-operation",children:(0,l.jsx)(s.code,{children:"refreshTableWithPayload"})}),", ",(0,l.jsx)(s.a,{href:"./data-access#-refreshalltables-void",children:(0,l.jsx)(s.code,{children:"refreshAllTables"})})," and ",(0,l.jsx)(s.a,{href:"./data-access#-refreshtabletable-string-void",children:(0,l.jsx)(s.code,{children:"refreshTable"})})," manually."]}),"\n",(0,l.jsx)(s.li,{children:"Triggers a fresh fetch and UI update from the current local state."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"-notes",children:"\ud83d\udd10 Notes"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Realtime subscriptions are deduplicated per ",(0,l.jsx)(s.code,{children:"table:filter"})," to avoid redundant listeners."]}),"\n",(0,l.jsxs)(s.li,{children:["The ",(0,l.jsx)(s.code,{children:"data"})," array is re-generated only when internal ",(0,l.jsx)(s.code,{children:"version"})," changes, ensuring minimal re-renders."]}),"\n",(0,l.jsxs)(s.li,{children:["The ",(0,l.jsx)(s.code,{children:"filter"})," you pass must be Supabase-compatible (e.g., ",(0,l.jsx)(s.code,{children:"eq"}),", ",(0,l.jsx)(s.code,{children:"lt"}),", ",(0,l.jsx)(s.code,{children:"gte"}),", etc.)."]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"-tips",children:"\ud83e\uddea Tips"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Use ",(0,l.jsx)(s.code,{children:"lazy: true"})," when the component should not fetch on mount."]}),"\n",(0,l.jsxs)(s.li,{children:["Use ",(0,l.jsx)(s.code,{children:"flushIntervalMs"})," to tune performance for high-frequency updates."]}),"\n",(0,l.jsxs)(s.li,{children:["Use ",(0,l.jsx)(s.code,{children:"dataMap"})," when you need fast lookups by ID or primary key."]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h2,{id:"-table-refresh-utilities",children:"\ud83d\udd04 Table Refresh Utilities"}),"\n",(0,l.jsxs)(s.p,{children:["These utilities allow you to programmatically refresh data for specific tables (or all tables) in your Supastash-powered app. Useful when you want to trigger UI reactivity after a local or remote change.\nWhile the ",(0,l.jsx)(s.code,{children:"useSupastashData"})," hook automatically handles refreshes for most common cases, you can manually invoke a refresh when needed."]}),"\n",(0,l.jsx)(s.h3,{id:"-exports",children:"\ud83d\udce6 Exports"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:'import {\n  refreshTable,\n  refreshAllTables,\n  refreshTableWithPayload,\n} from "supastash/utils/sync/refreshTables";\n'})}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"-under-the-hood",children:"\ud83e\udde0 Under the Hood"}),"\n",(0,l.jsxs)(s.p,{children:["This utility uses a ",(0,l.jsx)(s.strong,{children:"debounced event emitter"})," system powered by ",(0,l.jsx)(s.code,{children:"supastashEventBus"}),":"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Events follow the pattern: ",(0,l.jsx)(s.code,{children:"refresh:<table>"})," or ",(0,l.jsx)(s.code,{children:"refresh:all"})]}),"\n",(0,l.jsx)(s.li,{children:"Debouncing ensures multiple triggers within a short timeframe do not cause unnecessary re-renders"}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsxs)(s.h3,{id:"-refreshtabletable-string-void",children:["\ud83e\udde9 ",(0,l.jsx)(s.code,{children:"refreshTable(table: string): void"})]}),"\n",(0,l.jsxs)(s.p,{children:["Triggers a ",(0,l.jsx)(s.strong,{children:"debounced refresh"})," event for a specific table."]}),"\n",(0,l.jsx)(s.h4,{id:"example",children:"Example:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:'refreshTable("orders");\n'})}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Emits ",(0,l.jsx)(s.code,{children:"refresh:orders"})," on the event bus after 100ms debounce."]}),"\n",(0,l.jsx)(s.li,{children:"Use this if you have to after updating or syncing data manually."}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsxs)(s.h3,{id:"-refreshalltables-void",children:["\ud83e\udde9 ",(0,l.jsx)(s.code,{children:"refreshAllTables(): void"})]}),"\n",(0,l.jsxs)(s.p,{children:["Triggers a ",(0,l.jsx)(s.strong,{children:"debounced global refresh"})," event for all subscribed tables."]}),"\n",(0,l.jsx)(s.h4,{id:"example-1",children:"Example:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:"refreshAllTables();\n"})}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Emits ",(0,l.jsx)(s.code,{children:"refresh:all"})," after 1000ms debounce."]}),"\n",(0,l.jsx)(s.li,{children:"Useful after a bulk operation or full sync."}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"-usage-in-a-component-example",children:"\ud83d\udee0 Usage in a Component (Example)"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:'import { refreshTable } from "supastash/utils/sync/refreshTables";\n\nfunction onSyncComplete() {\n  refreshTable("messages");\n}\n'})}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsxs)(s.h3,{id:"-refreshtablewithpayloadtable-payload-operation",children:["\ud83e\udde9 ",(0,l.jsx)(s.code,{children:"refreshTableWithPayload(table, payload, operation)"})]}),"\n",(0,l.jsxs)(s.p,{children:["Manually pushes data changes to the UI. This is useful when you're syncing changes from a custom source or handling advanced offline scenarios where the UI needs to reflect a specific operation. All calls performed with the ",(0,l.jsx)(s.code,{children:"supastash"})," query builder will be reflected on the UI but you can use this if needed."]}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsxs)(s.p,{children:["Unlike ",(0,l.jsx)(s.code,{children:"refreshTable"}),", this requires the full payload to be passed and reflects the data immediately in the UI via internal state updates."]}),"\n"]}),"\n",(0,l.jsx)(s.h4,{id:"parameters",children:"Parameters:"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"table: string"})," \u2013 The table name to refresh (e.g., ",(0,l.jsx)(s.code,{children:'"orders"'}),")"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"payload: any | any[]"})," \u2013 The full row(s) you want reflected in the UI"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:'operation: "insert" | "update" | "delete" | "upsert"'})," \u2013 The type of data operation being simulated"]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h4,{id:"-example",children:"\ud83d\udd27 Example:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:'refreshTableWithPayload(\n  "orders",\n  { id: "abc", status: "processing", updated_at, synced_at ... },\n  "update"\n); // Must be the full payload!\n'})}),"\n",(0,l.jsxs)(s.p,{children:["This will emit a ",(0,l.jsx)(s.code,{children:"push:orders"})," event, and the Supastash listener will update the internal state used by ",(0,l.jsx)(s.code,{children:"useSupastashData"}),". Number of event listeners can be increased with ",(0,l.jsx)(s.a,{href:"/supastash/docs/configuration",children:"configuring supastash"})]}),"\n",(0,l.jsx)(s.h3,{id:"-whats-next",children:"\ud83d\udd17 What\u2019s Next?"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.a,{href:"/supastash/docs/configuration",children:"configuration docs"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.a,{href:"/supastash/docs/useSupastash-hook",children:"useSupastash docs"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.a,{href:"/supastash/docs/supastash-query-builder",children:"Query Builder docs"})}),"\n"]})]})}function o(e={}){const{wrapper:s}={...(0,d.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}}}]);